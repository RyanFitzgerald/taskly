"use strict";!function(){var e=document.getElementById("todo-input-field"),t=document.getElementById("todo-input-submit"),n=document.getElementById("todo-list"),a={};Sortable.create(n,{animation:150,onEnd:function(){c()}});var o=function(e,t,o){var c=document.createElement("li");c.setAttribute("class","todo-item"),c.setAttribute("id","todo-"+o),c.dataset.createdOn=t,c.innerHTML='\n            <div class="todo-item-wrap">\n                <div class="todo-item-complete"><span><i class="fa fa-check" aria-hidden="true"></i></span></div>\n                <div class="todo-item-content">'+e+'</div>\n                <div class="todo-item-content-edit"><input type="text" class="todo-item-edit-field"></div>\n                <div class="todo-item-edit"><span><i class="fa fa-pencil" aria-hidden="true"></i></span></div>\n                <div class="todo-item-delete"><span><i class="fa fa-times" aria-hidden="true"></i></span></div>\n            </div>\n            <div class="todo-item-completed"><span>Completed!</span></div>\n            <div class="todo-item-deleted"><span>Deleted!</span></div>\n        ',n.append(c),s(c.getElementsByClassName("todo-item-complete")[0]),i(c.getElementsByClassName("todo-item-edit-field")[0]),d(c.getElementsByClassName("todo-item-edit")[0]),l(c.getElementsByClassName("todo-item-delete")[0]),m(),a[o]={todo:e,created:t},r()},s=function(e){var t=e.parentNode.parentNode,n=e.parentNode,a=t.getElementsByClassName("todo-item-completed")[0];e.addEventListener("click",function(){a.height=t.height,a.classList.add("active"),n.classList.add("slide"),setTimeout(function(){t.remove()},750)})},i=function(e){e.addEventListener("keyup",function(t){if(13===t.keyCode){if(""===e.value)return;e.parentNode.parentNode.getElementsByClassName("todo-item-content")[0].innerHTML=e.value,e.parentNode.parentNode.getElementsByClassName("todo-item-content")[0].classList.remove("inactive"),e.parentNode.parentNode.getElementsByClassName("todo-item-content-edit")[0].classList.remove("active"),e.parentNode.parentNode.classList.remove("active"),c()}})},d=function(e){e.addEventListener("click",function(){e.parentNode.getElementsByClassName("todo-item-content")[0].classList.contains("inactive")?(e.parentNode.getElementsByClassName("todo-item-content")[0].classList.remove("inactive"),e.parentNode.getElementsByClassName("todo-item-content-edit")[0].classList.remove("active"),e.parentNode.getElementsByClassName("todo-item-edit")[0].getElementsByTagName("span")[0].classList.remove("active"),e.parentNode.classList.remove("active")):(e.parentNode.getElementsByClassName("todo-item-content")[0].classList.add("inactive"),e.parentNode.getElementsByClassName("todo-item-edit-field")[0].value=e.parentNode.getElementsByClassName("todo-item-content")[0].innerHTML,e.parentNode.getElementsByClassName("todo-item-content-edit")[0].classList.add("active"),e.parentNode.getElementsByClassName("todo-item-edit-field")[0].select(),e.parentNode.classList.add("active"))})},l=function(e){e.addEventListener("click",function(){e.parentNode.parentNode.getElementsByClassName("todo-item-deleted")[0].height=e.parentNode.parentNode.height,e.parentNode.parentNode.getElementsByClassName("todo-item-deleted")[0].classList.add("active"),e.parentNode.classList.add("slide"),setTimeout(function(){e.parentNode.parentNode.remove(),c()},750)})},m=function(){e.value=""},c=function(){var e=document.getElementsByClassName("todo-item");if(a={},e.length>0)for(var t=0;t<e.length;t++)e[t].id="todo-"+(t+1),a[t+1]={todo:e[t].getElementsByClassName("todo-item-content")[0].innerHTML,created:e[t].dataset.createdOn};r()},r=function(){chrome.storage.sync.remove("list",function(){chrome.storage.sync.set({list:a},function(){console.log("List updated.")})})},v=function(){chrome.storage.sync.get("list",function(e){for(var t in e.list)if(e.list.hasOwnProperty(t)){var n=e.list[t];o(n.todo,n.created,t)}})},p=function(){v(),e.addEventListener("keyup",function(t){if(13===t.keyCode){if(""===e.value)return;o(e.value,moment().format("YYYY-MM-DD"),document.getElementsByClassName("todo-item").length+1)}}),t.addEventListener("click",function(){""!==e.value&&o(e.value,moment().format("YYYY-MM-DD"),document.getElementsByClassName("todo-item").length+1)})};document.addEventListener("DOMContentLoaded",p)}();