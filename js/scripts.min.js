"use strict";!function(){var e=document.getElementById("todo-input-field"),t=document.getElementById("todo-input-submit"),n=document.getElementById("todo-list"),i=document.getElementById("todo-summary"),s=document.getElementById("todo-summary-toggle"),a={};Sortable.create(n,{animation:150,onEnd:function(){f()}});var o=function(e,t,i){var s=document.createElement("li");s.setAttribute("class","todo-item"),s.setAttribute("id","todo-"+i),s.dataset.createdOn=t,s.innerHTML='\n            <div class="todo-item-wrap">\n                <div class="todo-item-complete"><span><i class="fa fa-check" aria-hidden="true"></i></span></div>\n                <div class="todo-item-content">'+e+'</div>\n                <div class="todo-item-content-edit"><input type="text" class="todo-item-edit-field"></div>\n                <div class="todo-item-edit-options">\n                    <div class="todo-item-edit-confirm"><span><i class="fa fa-check" aria-hidden="true"></i></span></div>\n                    <div class="todo-item-edit-cancel"><span><i class="fa fa-times" aria-hidden="true"></i></span></div>\n                </div>\n                <div class="todo-item-options">\n                    <div class="todo-item-edit"><span><i class="fa fa-pencil" aria-hidden="true"></i></span></div>\n                    <div class="todo-item-delete"><span><i class="fa fa-trash-o" aria-hidden="true"></i></span></div>\n                </div>\n            </div>\n            <div class="todo-item-completed"><span>Completed!</span></div>\n            <div class="todo-item-deleted"><span>Deleted!</span></div>\n        ',n.append(s),d(s.getElementsByClassName("todo-item-complete")[0]),c(s.getElementsByClassName("todo-item-edit")[0]),l(s.getElementsByClassName("todo-item-edit-field")[0]),m(s.getElementsByClassName("todo-item-edit-confirm")[0]),r(s.getElementsByClassName("todo-item-edit-cancel")[0]),v(s.getElementsByClassName("todo-item-delete")[0]),u(),a[i]={todo:e,created:t},g()},d=function(e){var t=e.parentNode.parentNode,n=e.parentNode,i=t.getElementsByClassName("todo-item-completed")[0];e.addEventListener("click",function(){i.height=t.height,i.classList.add("active"),n.classList.add("slide"),setTimeout(function(){t.remove()},750)})},l=function(e){var t=e.parentNode.parentNode;e.addEventListener("keyup",function(n){if(13===n.keyCode){if(""===e.value)return;t.getElementsByClassName("todo-item-content")[0].innerHTML=e.value,t.getElementsByClassName("todo-item-content")[0].classList.remove("inactive"),t.getElementsByClassName("todo-item-content-edit")[0].classList.remove("active"),t.classList.remove("active"),f()}})},c=function(e){var t=e.parentNode.parentNode;e.addEventListener("click",function(){t.getElementsByClassName("todo-item-content")[0].classList.add("inactive"),t.getElementsByClassName("todo-item-edit-field")[0].value=t.getElementsByClassName("todo-item-content")[0].innerHTML,t.getElementsByClassName("todo-item-content-edit")[0].classList.add("active"),t.getElementsByClassName("todo-item-edit-field")[0].select(),t.classList.add("active")})},m=function(e){var t=e.parentNode.parentNode,n=t.getElementsByClassName("todo-item-edit-field")[0];e.addEventListener("click",function(){""!==n.value&&(t.getElementsByClassName("todo-item-content")[0].innerHTML=n.value,t.getElementsByClassName("todo-item-content")[0].classList.remove("inactive"),t.getElementsByClassName("todo-item-content-edit")[0].classList.remove("active"),t.classList.remove("active"),f())})},r=function(e){var t=e.parentNode.parentNode;e.addEventListener("click",function(){t.getElementsByClassName("todo-item-content")[0].classList.remove("inactive"),t.getElementsByClassName("todo-item-content-edit")[0].classList.remove("active"),t.getElementsByClassName("todo-item-edit")[0].getElementsByTagName("span")[0].classList.remove("active"),t.classList.remove("active")})},v=function(e){var t=e.parentNode.parentNode.parentNode,n=e.parentNode.parentNode;e.addEventListener("click",function(){t.getElementsByClassName("todo-item-deleted")[0].height=t.clientHeight,t.getElementsByClassName("todo-item-deleted")[0].classList.add("active"),n.classList.add("slide"),setTimeout(function(){t.remove(),f()},750)})},u=function(){e.value=""},f=function(){var e=document.getElementsByClassName("todo-item");if(a={},e.length>0)for(var t=0;t<e.length;t++)e[t].id="todo-"+(t+1),a[t+1]={todo:e[t].getElementsByClassName("todo-item-content")[0].innerHTML,created:e[t].dataset.createdOn};g()},g=function(){chrome.storage.sync.remove("list",function(){chrome.storage.sync.set({list:a},function(){console.log("List updated.")})})},p=function(){chrome.storage.sync.get("list",function(e){for(var t in e.list)if(e.list.hasOwnProperty(t)){var n=e.list[t];o(n.todo,n.created,t)}})},E=function(){p(),e.addEventListener("keyup",function(t){if(13===t.keyCode){if(""===e.value)return;o(e.value,moment().format("YYYY-MM-DD"),document.getElementsByClassName("todo-item").length+1)}}),t.addEventListener("click",function(){""!==e.value&&o(e.value,moment().format("YYYY-MM-DD"),document.getElementsByClassName("todo-item").length+1)}),s.addEventListener("click",function(){i.classList.contains("active")?i.classList.remove("active"):i.classList.add("active")})};document.addEventListener("DOMContentLoaded",E)}();